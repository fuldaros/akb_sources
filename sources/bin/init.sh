#!/bin/bash
# Скрипт для AKB-шивания исходников ядра
e="\x1b[";c=$e"39;49;00m";y=$e"93;01m";cy=$e"96;01m";r=$e"1;91m";g=$e"92;01m";m=$e"95;01m";
echo -e "$g Please wait...$y"
mkdir ../tmp
mv * ../tmp
sleep 2
cp -rf /usr/otagen ./
mkdir sources
mkdir gcc
mv ../tmp/* sources/
# Перенос папки .git в папку с исходниками для возможности продожения работы с git'ом
mv .git sources/
rm -rf ../tmp
sleep 1;
echo -e "$g  GENERATING MAKE.PROP!$y"
sleep 1;
echo "// YOUR NAME (a.k.a build user)
name_here
// ARCH (arm/arm64)
arch_here
// DEFCONFIG NAME
defconfig_here
// BUILD HOST
build_host_here
// CPU
cpu_here
// Device
device_here
// Image type (zImage/Image/Image.gz-dtb/...)
image_type_here
// GCC perfix
gcc_perfix_here
// Boot.img location
boot.img_location_here" > make.prop
cat make.prop
sleep 2;
echo -e "$g  MAKE.PROP GENERATED!$y"
echo " "
echo " "
echo -e "$g  GENERATING MAKEFILE$y"
echo '### MAKEFILE GENERATED BY AKB"
# BEGIN MAKEFILE
prepare:
	@echo "Building <Prepare>"
	@akb_prepare
build:
	@echo "Building <Build>" 
	@akb_build
clean:
	@echo "Building <Clean>"
	@akb_clean
# END MAKEFILE' > makefile
cat makefile
sleep 1;
echo -e "$g  MAKEFILE GENERATED!$y"
sleep 1;
echo " Done!"
